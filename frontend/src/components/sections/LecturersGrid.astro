---
import { getCollection } from "astro:content";

let lecturers = [];

try {
    const strapiLecturers = await getCollection("lecturers");
    if (strapiLecturers && strapiLecturers.length > 0) {
        lecturers = strapiLecturers.map((l: any) => l.data);
    }
} catch (e) {
    console.warn("Could not fetch lecturers from Strapi.");
}

// Fallback static data mimicking code1.html
if (lecturers.length === 0) {
    lecturers = [
        {
            name: "Jan Kowalski",
            role: "Ekspert SEO & Content",
            description:
                "Specjalista z 15-letnim doświadczeniem w branży eCommerce, prowadzący projekty dla największych marek w Polsce. Autor licznych publikacji.",
            image_url:
                "https://images.unsplash.com/photo-1560250097-0b93528c311a?q=80&w=1000&auto=format&fit=crop",
        },
        {
            name: "Anna Nowak",
            role: "Strateg Marketingu",
            description:
                "Pasjonatka strategii komunikacji i budowania wizerunku marki w świecie cyfrowym z dorobkiem naukowym na Politechnice.",
            image_url:
                "https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?q=80&w=1000&auto=format&fit=crop",
        },
        {
            name: "Piotr Wiśniewski",
            role: "Social Media Specialist",
            description:
                "Praktyk z wieloletnim stażem w zarządzaniu kampaniami płatnymi. Optymalizuje budżety liczone w milionach złotych.",
            image_url:
                "https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?q=80&w=1000&auto=format&fit=crop",
        },
        {
            name: "Marta Wójcik",
            role: "E-commerce Manager",
            description:
                "Ekspertka w optymalizacji procesów sprzedażowych oraz wdrażaniu nowoczesnych narzędzi technologicznych w e-handlu.",
            image_url:
                "https://images.unsplash.com/photo-1580489944761-15a19d654956?q=80&w=1000&auto=format&fit=crop",
        },
        {
            name: "Tomasz Mazur",
            role: "Content Strategist",
            description:
                "Twórca angażujących treści i strategii contentowych, które budują trwałe relacje z klientami i napędzają organiczny wzrost.",
            image_url:
                "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?q=80&w=1000&auto=format&fit=crop",
        },
        {
            name: "K. Lewandowska",
            role: "Performance Analyst",
            description:
                "Analityk danych zorientowany na wyniki, specjalizujący się w optymalizacji konwersji (CRO) i zwrotu z inwestycji (ROI).",
            image_url:
                "https://images.unsplash.com/photo-1598550832205-d5b5fe4a018b?q=80&w=1000&auto=format&fit=crop",
        },
    ];
}
---

<div
    class="px-4 md:px-10 lg:px-40 flex justify-center py-10 md:py-16"
    id="wykladowcy"
>
    <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
        <!-- PageHeading -->
        <div class="flex flex-col gap-3 mb-12">
            <div class="flex items-center gap-2">
                <span class="h-1 w-12 bg-primary rounded-full"></span>
                <p
                    class="text-primary text-sm font-bold tracking-widest uppercase"
                >
                    Eksperci & Praktycy
                </p>
            </div>
            <h1
                class="text-[#181111] dark:text-white text-4xl md:text-5xl font-black leading-tight tracking-[-0.033em]"
            >
                Nasza Kadra
            </h1>
            <p
                class="text-[#896161] dark:text-[#b59a9a] text-lg font-normal leading-relaxed max-w-2xl"
            >
                Poznaj zespół wybitnych wykładowców akademickich oraz cenionych
                ekspertów z branży, którzy podzielą się z Tobą unikalną,
                praktyczną wiedzą z zakresu marketingu cyfrowego.
            </p>
        </div>
        <!-- ImageGrid / Teacher Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
            {
                lecturers.map((lecturer: any) => (
                    <div class="flex flex-col gap-4 p-5 bg-white dark:bg-background-dark/40 rounded-xl border border-[#f4f0f0] dark:border-[#3d2a2a] shadow-sm hover:shadow-md hover:-translate-y-1 transition-all">
                        <div
                            class="w-full bg-center bg-no-repeat aspect-[4/5] bg-cover rounded-lg grayscale hover:grayscale-0 transition-all duration-500"
                            style={`background-image: url("${lecturer.image_url}");`}
                        ></div>
                        <div class="flex flex-col gap-1">
                            <div class="flex justify-between items-start">
                                <p class="text-primary text-xl font-bold leading-tight">
                                    {lecturer.name}
                                </p>
                                <a
                                    class="text-[#896161] hover:text-[#0077b5] transition-colors"
                                    href="#"
                                >
                                    <span class="material-symbols-outlined !text-[20px]">
                                        share
                                    </span>
                                </a>
                            </div>
                            <p class="text-[#181111] dark:text-white text-sm font-semibold uppercase tracking-wider">
                                {lecturer.role}
                            </p>
                            <p class="text-[#896161] dark:text-[#b59a9a] text-sm font-normal leading-normal mt-2">
                                {lecturer.description}
                            </p>
                        </div>
                    </div>
                ))
            }
        </div>
        <!-- CTASection -->
        <div
            class="rounded-2xl overflow-hidden bg-primary/5 dark:bg-primary/10 border border-primary/20 p-8 md:p-12 mb-16"
        >
            <div class="flex flex-col items-center gap-6 text-center">
                <h2
                    class="text-[#181111] dark:text-white text-3xl md:text-4xl font-black leading-tight tracking-tight max-w-[720px]"
                >
                    Zacznij swoją karierę w e-marketingu
                </h2>
                <p
                    class="text-[#896161] dark:text-[#b59a9a] text-lg font-normal leading-normal max-w-[600px]"
                >
                    Rekrutacja na studia podyplomowe właśnie trwa. Zdobądź
                    certyfikat renomowanej uczelni technicznej i dołącz do grona
                    profesjonalistów.
                </p>
                <button
                    class="flex min-w-[180px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-8 bg-primary text-white text-base font-bold leading-normal tracking-[0.015em] hover:scale-105 transition-all shadow-lg shadow-primary/20"
                >
                    <span class="truncate">Zapisz się teraz</span>
                </button>
            </div>
        </div>
    </div>
</div>
